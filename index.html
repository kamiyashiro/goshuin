function generate() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const dateStr = getJapaneseDate(new Date());
  const size = Math.floor(canvas.width / 16 * 1.5);
  const lineHeight = size * 1.2;

  ctx.font = size + "px 'KouzanBrush'";
  ctx.fillStyle = "#000";
  ctx.textAlign = "center";

  // 必要高さを計算
  const neededHeight = lineHeight * dateStr.length + size;

  // 描画開始Y（左下詰め・でも下からはみ出さない）
  const y = canvas.height - neededHeight;
  const x = size * 1.1;

  drawVertical(dateStr, x, y, size);
}
